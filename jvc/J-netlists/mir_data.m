figure(2);plot(x(:,1),x(:,2),'b',y(:,1),y(:,2),'r')
clear all;tic;net=cho_load('mirror24.m');[q,k]=cho_dc(net);figure(1);cho_display(net,q);toc,theta=q(lookup_coord(net,'plate_left','rx')),cosine=q(lookup_coord(net,'bridgecenter','y')),degree=theta*180/pi

lowSCS=7u %8u:12u. 7u exp
highSCS=50u %50u
upperSCS=5u %15u. 5u exp
%f3d * [bridgecenter][F=(25^2)*(0.13e-6) oz=-pi/2]
%f3d * [bridgecenter][F=(50^2)*(0.13e-6) oz=-pi/2]
%f3d * [bridgecenter][F=(75^2)*(0.13e-6) oz=-pi/2]
%f3d * [bridgecenter][F=(100^2)*(0.13e-6) oz=-pi/2]
%f3d * [bridgecenter][F=(110^2)*(0.13e-6) oz=-pi/2]
f3d * [bridgecenter][F=(125^2)*(0.13e-6) oz=-pi/2]
% cho
x=[0		0
12   	-0.18361
25 	-0.79694
37		-1.74
50		-3.1878
75		-7.1725
100	-12.751
110	-15.429
125	-19.923
130	-21.549
140 	-24.992
150 	-28.6898];

%exp

%t=-[0 0.2 0.5 1.45 3.05 4.25 6.05 7.3 9.45 11.05 11.85 12.1 12.7 13.2 14.2]*1.51;
%V=[0 3.3 5 7.05 9.2 10.6 12.15 13.05 14.25 14.95 15.3 15.6 16.45 17.1 17.7]*7.299;

t=-[0 0.2 0.5 1.45 3.05 4.25 6.05  7.3   9.45  11.05 12.1 12.7  13.2 14.2]*1.51;
V= [0 3.3 5   7.05 9.2  10.6 12.15 13.05 14.25 14.95 15.6 16.45 17.1 17.7]*7.299;

figure(2);clf;plot(x(:,1),x(:,2),'b'); hold on;plot(V,t,'-*r');



clear all;
i=0;
for f=10:10:110
   i=i+1;
   tic;p.v=f;F(i)=f,net=cho_load('mirror24.m',p);[q,k]=cho_dc(net);toc,theta=q(lookup_coord(net,'plate_left','rx')),plateY=q(lookup_coord(net,'plate_left','y')),cosine=q(lookup_coord(net,'bridgecenter','y')),degree(i)=theta*180/pi
end

degree=[0
        -0.127510268742107
        -0.510041074968429
           -1.147592410212
         -2.04016427193655
         -3.18775664017165 
         -4.59036964573732
         -6.24800319102382
         -8.16065706676953
         -10.3283316148997
       -12.7510266000265];
      F=[0    10    20    30    40    50    60    70    80    90   100];
      figure(2);clf;plot(F,degree,'g');
      
%highSCS cut in half
degree=[0
-0.0592240710079718
        -0.236896284031887
        -0.533016637132525
        -0.947585136127549
         -1.48060177823657
          -2.1320665485301
         -2.90197947961972
          -3.7903405445102
         -4.79714975463671
         -5.92240709636573];
%         -7.16611258103524];
      F=[0    10    20    30    40    50    60    70    80    90   100 ];
      figure(2);hold on; plot(F,degree,'b');
      
%moment arm cut in half      
degree=[0
   -0.0994106755902329
        -0.397642702360932
        -0.894696084596524
         -1.59057080944373
         -2.48526690409503
         -3.57878432075091
         -4.87112313313726
         -6.36228325610481
         -8.05226473413556
         -9.94106761638013];
      F=[0    10    20    30    40    50    60    70    80    90   100];
      figure(2);hold on; plot(F,degree,'r');
      
degree=[0
   -0.393294358414426
         -1.57317747915296
         -3.53964908752405
         -6.29270991661183
         -9.83235881492966
         -14.1585963500962
          -19.271423354925
         -25.1708396664473
         -31.8568439097864
         -39.3294352597187];
            F=[0    10    20    30    40    50    60    70    80    90   100];
      figure(2);hold on; plot(F,degree,'m');
      
      
      
      
      
      
      
      clear all;
i=0;
for larm=50e-6:100e-6 / 2:750e-6
   for wperf=15e-6:10e-6 / 2:65e-6
      i=i+1;
      tic;
      p.WPERF=wperf;
      p.LARM=larm;
      net=cho_load('mirror24.m',p);
      [q,k]=cho_dc(net);
      toc
      perf(i)=wperf
      arm(i)=larm
      theta=q(lookup_coord(net,'plate_left','rx'));
      degree(i)=theta*180/pi
   end
end


degree=[   -6.06122405106895
         -4.89740585164202
         -4.07038593879861
         -3.51995479341895
         -3.14169029522355
         -2.86621066730981
           -2.656426357287
         -2.49124065851859
         -2.35777675308015
         -2.24771237998824
         -2.15541864665222
         -6.92494013421976
         -5.53325508334196
         -4.51266506048137
         -3.84586331515885
         -3.39621869796827
         -3.07367057851733
         -2.83097863683054
         -2.64172826748546
         -2.49003588123004
         -2.36576829758414
         -2.26214866248087
          -7.8382694059472
         -6.19199927563188
         -4.95052878512938
         -4.15631168089491
         -3.63132849820696
         -3.26051301919068
         -2.98484334743148
         -2.77192780512269
          -2.6025909581884
         -2.46475996113935
         -2.35045100473585
         -8.78131522323097
         -6.85576217029641
         -5.37076589109516
         -4.44261636816076
         -3.84147970239491
         -3.42330362832364
         -3.11602032904351
         -2.88084162992932
         -2.69516311544373
         -2.54493565511107
         -2.42096823580892
          -9.6864559110387
         -7.47479902193722
         -5.74220214838581
         -4.68465675342216
         -4.01285066607846
         -3.55203769261606
         -3.21696327570008
          -2.9625891299925
          -2.7630480254897
         -2.60245038516284
         -2.47050110253945
         -10.4463935087379
         -7.97643091498291
         -6.02451394839908
         -4.85826216783469
         -4.12951856996794
         -3.63544950421051
         -3.27926353666044
         -3.01063050363365
         -2.80099134571839
         -2.63297033695476
         -2.49539705236095
         -10.9335880761172
         -8.27974409793172
         -6.17738265142482
         -4.94100711105323
         -4.17744487936685
         -3.66396451043179
         -3.29596886348806
         -3.01967264811433
         -2.80481130889591
         -2.63309249838894
         -2.49281898137817
         -11.0412046411885
         -8.32112529963713
         -6.17227563000789
         -4.91831316561673
         -4.14810700441263
         -3.63210041746788
         -3.26330088569606
         -2.98697301723086
         -2.77243552900243
         -2.60119966697423
         -2.46147123996662
         -10.7308612157267
         -8.08102997264631
         -6.00282338696307
          -4.7881770860696
         -4.04105779642318
         -3.54003713545292
         -3.18170983906022
         -2.91309924523387
         -2.70447793521865
         -2.53791776474873
         -2.40197466446721
         -10.0543078287238
         -7.59459158429049
          -5.6880821458716
         -4.56234053924044
         -3.86442052081233
         -3.39385108403676
         -3.05599433270357
         -2.80199284509599
         -2.60427398169685
         -2.44613510384004
         -2.31687704227912
         -9.13033177248133
          -6.9375375772357
         -5.26647814774952
         -4.26322753639374
         -3.63307890012106
         -3.20432427493503
         -2.89445594091717
         -2.66033562832326
         -2.47738445177151
         -2.33060171532999
         -2.21032027488368
         -8.09518880934051
         -6.19757703951818
         -4.78400570115116
         -3.91817929262173
         -3.36535644664995
          -2.9848007473498
         -2.70739994772055
         -2.49643657272259
         -2.33073191565618
         -2.19723418435521
         -2.08746572081889
         -7.06099605452626
         -5.44947554155352
         -4.28295648083291
         -3.55361051166746
           -3.079520970077
         -2.74887126141499
          -2.5054844972045
         -2.31898902098312
         -2.17162440253836
         -2.05232394427726
          -1.9538339921898
         -6.09925003168061
         -4.74375096825264
         -3.79535359276949
         -3.19106728034808
         -2.79120586604334
         -2.50855895544458
         -2.29836996576736
         -2.13601951342231
         -2.00690840558596
         -1.90183478982348
         -1.81470943899954
         -5.24441836011848
         -4.10728778059482
         -3.34147629878272
         -2.84570690521241
          -2.5121567638952
         -2.27331187831693
          -2.0938997535963
         -1.95420914226787
         -1.84239550095431
         -1.75090975330943
         -1.67470896932995];
      perf=[1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                  6.5e-005
                  1.5e-005
                    2e-005
                  2.5e-005
                    3e-005
                  3.5e-005
                    4e-005
                  4.5e-005
                    5e-005
                  5.5e-005
                    6e-005
                    6.5e-005];
                 arm=[5e-005
                    5e-005
                    5e-005
                    5e-005
                    5e-005
                    5e-005
                    5e-005
                    5e-005
                    5e-005
                    5e-005
                    5e-005
                    0.0001
                    0.0001
                    0.0001
                    0.0001
                    0.0001
                    0.0001
                    0.0001
                    0.0001
                    0.0001
                    0.0001
                    0.0001
                   0.00015
                   0.00015
                   0.00015
                   0.00015
                   0.00015
                   0.00015
                   0.00015
                   0.00015
                   0.00015
                   0.00015
                   0.00015
                    0.0002
                    0.0002
                    0.0002
                    0.0002
                    0.0002
                    0.0002
                    0.0002
                    0.0002
                    0.0002
                    0.0002
                    0.0002
                   0.00025
                   0.00025
                   0.00025
                   0.00025
                   0.00025
                   0.00025
                   0.00025
                   0.00025
                   0.00025
                   0.00025
                   0.00025
                    0.0003
                    0.0003
                    0.0003
                    0.0003
                    0.0003
                    0.0003
                    0.0003
                    0.0003
                    0.0003
                    0.0003
                    0.0003
                   0.00035
                   0.00035
                   0.00035
                   0.00035
                   0.00035
                   0.00035
                   0.00035
                   0.00035
                   0.00035
                   0.00035
                   0.00035
                    0.0004
                    0.0004
                    0.0004
                    0.0004
                    0.0004
                    0.0004
                    0.0004
                    0.0004
                    0.0004
                    0.0004
                    0.0004
                   0.00045
                   0.00045
                   0.00045
                   0.00045
                   0.00045
                   0.00045
                   0.00045
                   0.00045
                   0.00045
                   0.00045
                   0.00045
                    0.0005
                    0.0005
                    0.0005
                    0.0005
                    0.0005
                    0.0005
                    0.0005
                    0.0005
                    0.0005
                    0.0005
                    0.0005
                   0.00055
                   0.00055
                   0.00055
                   0.00055
                   0.00055
                   0.00055
                   0.00055
                   0.00055
                   0.00055
                   0.00055
                   0.00055
                    0.0006
                    0.0006
                    0.0006
                    0.0006
                    0.0006
                    0.0006
                    0.0006
                    0.0006
                    0.0006
                    0.0006
                    0.0006
                   0.00065
                   0.00065
                   0.00065
                   0.00065
                   0.00065
                   0.00065
                   0.00065
                   0.00065
                   0.00065
                   0.00065
                   0.00065
                    0.0007
                    0.0007
                    0.0007
                    0.0007
                    0.0007
                    0.0007
                    0.0007
                    0.0007
                    0.0007
                    0.0007
                    0.0007
                   0.00075
                   0.00075
                   0.00075
                   0.00075
                   0.00075
                   0.00075
                   0.00075
                   0.00075
                   0.00075
                   0.00075
                   0.00075];
                figure(2);surf(perf,arm,degree);
                
x=0;y=0;z=0;figure(2);i=0;j=0;k=0;
for larm=50e-6:100e-6 / 2:750e-6
   i=i+1;
   j=0;
   for wperf=15e-6:10e-6 / 2:65e-6
      j=j+1;
      k=k+1;
      %      plot3(wperf,larm,degree(i),'*');    
      x(i,j)=wperf;
      y(i,j)=larm;
      z(i,j)=degree(k);
   end
end
shading interp;
surfl(x,y,z);
%mesh(x,y,z);
xlabel('width of perforated beam [m]');ylabel('length of moment arm [m]');zlabel('mirror rotation [deg]');
figure(2);clf;hold on;contour3(x,y,z,100);grid on;surfl(x,y,z);colorbar
